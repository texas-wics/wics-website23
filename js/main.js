AOS.init({
	duration: 800,
	easing: 'slide'
});

(function($) {

   "use strict";

   var isMobile = {
	   Android: function() {
		   return navigator.userAgent.match(/Android/i);
	   },
		   BlackBerry: function() {
		   return navigator.userAgent.match(/BlackBerry/i);
	   },
		   iOS: function() {
		   return navigator.userAgent.match(/iPhone|iPad|iPod/i);
	   },
		   Opera: function() {
		   return navigator.userAgent.match(/Opera Mini/i);
	   },
		   Windows: function() {
		   return navigator.userAgent.match(/IEMobile/i);
	   },
		   any: function() {
		   return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
	   }
   };


   $(window).stellar({
   responsive: true,
   parallaxBackgrounds: true,
   parallaxElements: true,
   horizontalScrolling: false,
   hideDistantElements: false,
   scrollProperty: 'scroll'
 });


   var fullHeight = function() {

	   $('.js-fullheight').css('height', $(window).height());
	   $(window).resize(function(){
		   $('.js-fullheight').css('height', $(window).height());
	   });

   };
   fullHeight();

   // loader
   var loader = function() {
	   setTimeout(function() {
		   if($('#ftco-loader').length > 0) {
			   $('#ftco-loader').removeClass('show');
		   }
	   }, 1);
   };
   loader();

   // Scrollax
  $.Scrollax();

   var carousel = function() {
	   $('.carousel-testimony').owlCarousel({
		   center: true,
		   loop: false,
		   items:1,
		   margin: 30,
		   stagePadding: 0,
		   nav: false,
		   navText: ['<span class="ion-ios-arrow-back">', '<span class="ion-ios-arrow-forward">'],
		   responsive:{
			   0:{
				   items: 1
			   },
			   600:{
				   items: 2
			   },
			   1000:{
				   items: 3
			   }
		   }
	   });

	   $('.carousel-case').owlCarousel({
		   center: true,
		   loop: true,
		   items:1,
		   margin: 30,
		   stagePadding: 0,
		   nav: false,
		   navText: ['<span class="ion-ios-arrow-back">', '<span class="ion-ios-arrow-forward">'],
		   responsive:{
			   0:{
				   items: 1
			   },
			   600:{
				   items: 2
			   },
			   1000:{
				   items: 3
			   }
		   }
	   });


   };
   carousel();

   $('nav .dropdown').hover(function(){
	   var $this = $(this);
	   // 	 timer;
	   // clearTimeout(timer);
	   $this.addClass('show');
	   $this.find('> a').attr('aria-expanded', true);
	   // $this.find('.dropdown-menu').addClass('animated-fast fadeInUp show');
	   $this.find('.dropdown-menu').addClass('show');
   }, function(){
	   var $this = $(this);
		   // timer;
	   // timer = setTimeout(function(){
		   $this.removeClass('show');
		   $this.find('> a').attr('aria-expanded', false);
		   // $this.find('.dropdown-menu').removeClass('animated-fast fadeInUp show');
		   $this.find('.dropdown-menu').removeClass('show');
	   // }, 100);
   });


   $('#dropdown04').on('show.bs.dropdown', function () {
	 console.log('show');
   });

   // scroll
   var scrollWindow = function() {
	   $(window).scroll(function(){
		   var $w = $(this),
				   st = $w.scrollTop(),
				   navbar = $('.ftco_navbar'),
				   sd = $('.js-scroll-wrap');

		   if (st > 150) {
			   if ( !navbar.hasClass('scrolled') ) {
				   navbar.addClass('scrolled');
			   }
		   }
		   if (st < 150) {
			   if ( navbar.hasClass('scrolled') ) {
				   navbar.removeClass('scrolled sleep');
			   }
		   }
		   if ( st > 350 ) {
			   if ( !navbar.hasClass('awake') ) {
				   navbar.addClass('awake');
			   }

			   if(sd.length > 0) {
				   sd.addClass('sleep');
			   }
		   }
		   if ( st < 350 ) {
			   if ( navbar.hasClass('awake') ) {
				   navbar.removeClass('awake');
				   navbar.addClass('sleep');
			   }
			   if(sd.length > 0) {
				   sd.removeClass('sleep');
			   }
		   }
	   });
   };
   scrollWindow();

   var isMobile = {
	   Android: function() {
		   return navigator.userAgent.match(/Android/i);
	   },
		   BlackBerry: function() {
		   return navigator.userAgent.match(/BlackBerry/i);
	   },
		   iOS: function() {
		   return navigator.userAgent.match(/iPhone|iPad|iPod/i);
	   },
		   Opera: function() {
		   return navigator.userAgent.match(/Opera Mini/i);
	   },
		   Windows: function() {
		   return navigator.userAgent.match(/IEMobile/i);
	   },
		   any: function() {
		   return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
	   }
   };

   var counter = function() {

	   $('#section-counter, .hero-wrap, .ftco-counter').waypoint( function( direction ) {

		   if( direction === 'down' && !$(this.element).hasClass('ftco-animated') ) {

			   var comma_separator_number_step = $.animateNumber.numberStepFactories.separator(',')
			   $('.number').each(function(){
				   var $this = $(this),
					   num = $this.data('number');
					   console.log(num);
				   $this.animateNumber(
					 {
					   number: num,
					   numberStep: comma_separator_number_step
					 }, 7000
				   );
			   });

		   }

	   } , { offset: '95%' } );

   }
   counter();


   var contentWayPoint = function() {
	   var i = 0;
	   $('.ftco-animate').waypoint( function( direction ) {

		   if( direction === 'down' && !$(this.element).hasClass('ftco-animated') ) {

			   i++;

			   $(this.element).addClass('item-animate');
			   setTimeout(function(){

				   $('body .ftco-animate.item-animate').each(function(k){
					   var el = $(this);
					   setTimeout( function () {
						   var effect = el.data('animate-effect');
						   if ( effect === 'fadeIn') {
							   el.addClass('fadeIn ftco-animated');
						   } else if ( effect === 'fadeInLeft') {
							   el.addClass('fadeInLeft ftco-animated');
						   } else if ( effect === 'fadeInRight') {
							   el.addClass('fadeInRight ftco-animated');
						   } else {
							   el.addClass('fadeInUp ftco-animated');
						   }
						   el.removeClass('item-animate');
					   },  k * 50, 'easeInOutExpo' );
				   });

			   }, 100);

		   }

	   } , { offset: '95%' } );
   };
   contentWayPoint();


   // navigation
   var OnePageNav = function() {
	   $(".smoothscroll[href^='#'], #ftco-nav ul li a[href^='#']").on('click', function(e) {
			e.preventDefault();

			var hash = this.hash,
					navToggler = $('.navbar-toggler');
			$('html, body').animate({
		   scrollTop: $(hash).offset().top
		 }, 700, 'easeInOutExpo', function(){
		   window.location.hash = hash;
		 });


		 if ( navToggler.is(':visible') ) {
			 navToggler.click();
		 }
	   });
	   $('body').on('activate.bs.scrollspy', function () {
		 console.log('nice');
	   })
   };
   OnePageNav();


   // magnific popup
   $('.image-popup').magnificPopup({
   type: 'image',
   closeOnContentClick: true,
   closeBtnInside: false,
   fixedContentPos: true,
   mainClass: 'mfp-no-margins mfp-with-zoom', // class to remove default margin from left and right side
	gallery: {
	 enabled: true,
	 navigateByImgClick: true,
	 preload: [0,1] // Will preload 0 - before current, and 1 after the current image
   },
   image: {
	 verticalFit: true
   },
   zoom: {
	 enabled: true,
	 duration: 300 // don't foget to change the duration also in CSS
   }
 });

 $('.popup-youtube, .popup-vimeo, .popup-gmaps').magnificPopup({
   disableOn: 700,
   type: 'iframe',
   mainClass: 'mfp-fade',
   removalDelay: 160,
   preloader: false,

   fixedContentPos: false
 });


 var TxtRotate = function(el, toRotate, period) {
 this.toRotate = toRotate;
 this.el = el;
 this.loopNum = 0;
 this.period = parseInt(period, 10) || 2000;
 this.txt = '';
 this.tick();
 this.isDeleting = false;
};

TxtRotate.prototype.tick = function() {
 var i = this.loopNum % this.toRotate.length;
 var fullTxt = this.toRotate[i];

 if (this.isDeleting) {
   this.txt = fullTxt.substring(0, this.txt.length - 1);
 } else {
   this.txt = fullTxt.substring(0, this.txt.length + 1);
 }

 this.el.innerHTML = '<span class="wrap">'+this.txt+'</span>';

 var that = this;
 var delta = 300 - Math.random() * 100;

 if (this.isDeleting) { delta /= 2; }

 if (!this.isDeleting && this.txt === fullTxt) {
   delta = this.period;
   this.isDeleting = true;
 } else if (this.isDeleting && this.txt === '') {
   this.isDeleting = false;
   this.loopNum++;
   delta = 500;
 }

 setTimeout(function() {
   that.tick();
 }, delta);
};

window.onload = function() {
 var elements = document.getElementsByClassName('txt-rotate');
 for (var i=0; i<elements.length; i++) {
   var toRotate = elements[i].getAttribute('data-rotate');
   var period = elements[i].getAttribute('data-period');
   if (toRotate) {
	 new TxtRotate(elements[i], JSON.parse(toRotate), period);
   }
 }
};

})(jQuery);


//load footer
let output = '';
output += `
<div class="container">
	   <div class="row mb-5">
		 <div class="col-md">
		   <div class="ftco-footer-widget mb-4">
			 <h2 class="logo"><a href="#"><img src="images/wicslogo24.png" style="width: 50%"></a></h2>
			 <p>Women in Computer Science is a non-profit organization dedicated to building a community of women in Computer Science.</p>
			 <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
			   <li class=""><a href="https://www.instagram.com/utwics/"><span class="icon-instagram"></span></a></li>
			   <li class=""><a href="https://www.facebook.com/texaswics/"><span class="icon-facebook"></span></a></li>
			   <li class=""><a href="https://twitter.com/texaswics"><span class="icon-twitter"></span></a></li>
			 </ul>
		   </div>
		 </div>
		 <div class="col-md">
		   <div class="ftco-footer-widget mb-4 ml-md-5">
			 <h2 class="ftco-heading-2">Resources</h2>
			 <ul class="list-unstyled">
			   <li><a href="https://forms.gle/qRaoXd5oQ4jDQtWj6" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>Discord</a></li>
			   <li><a href="https://linktr.ee/utwics" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>WiCS Link Tree</a></li>
			   <li><a href="./calendar.html" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>Calendar</a></li>
			   <!--<li><a href="https://forms.gle/qRaoXd5oQ4jDQtWj6" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>Member Registration</a></li>-->
			   <li><a href="./blog.html" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>Blog</a></li>
			   <li><a href="https://apps.cs.utexas.edu/resume/index.scgi" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>Update Resume</a></li>
			 </ul>
		   </div>
		 </div>
		 <div class="col-md">
		   <div class="ftco-footer-widget mb-4">
			   <h2 class="ftco-heading-2">Have a Question?</h2>
			   <div class="block-23 mb-3">
				 <ul>
				   <li><span class="icon icon-map-marker"></span><span class="text">
					   University of Texas at Austin <br />
					   Gates Dell Complex, Room 3.314 <br />
					   2317 Speedway, Austin, TX
					   </span></li>
				   <li><a href="mailto:wicspresident@gmail.com"><span class="icon icon-envelope"></span><span class="text">wicspresident@gmail.com</span></a></li>
				 </ul>
			   </div>
		   </div>
		 </div>
	   </div>
	   <div class="row">
		 <div class="col-md-12 text-center">

		   <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
 Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart color-danger" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
 <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
		 </div>
	   </div>
	 </div>

`

document.querySelector('.ftco-footer').innerHTML = output


//load header
let page_name = document.getElementById("ftco-navbar").textContent.replace(/\s+/g, '');
var curr_page = []
for (var i = 0; i < 7; i++) {
   curr_page.push(false)
}
switch (page_name) {
   case "home":
	   curr_page[0] = true;
	   break;
   case "about":
	   curr_page[1] = true;
	   break;
   case "members":
	   curr_page[2] = true;
	   break;
   case "programs":
	   curr_page[3] = true;
	   break;
   case "calendar":
	   curr_page[4] = true;
	   break;
   case "sponsors":
	   curr_page[5] = true;
	   break;
   case "resources":
	   curr_page[6] = true;
	   break;
   case "hackathon":
	   curr_page[7] = true;
	   break;
   case "contact":
	   curr_page[8] = true;
	   break;
}

function check_page(number) {
   if (curr_page[number]) {
	   return "active"
   }
   return ""
}

output = '';
output += `
<div class="container">
		  <a class="navbar-brand" href="index.html"><img src="images/wicslogo24.png" style="width: 40%"></a>
		 <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
		   <span class="oi oi-menu"></span> Menu
		 </button>

		 <div class="collapse navbar-collapse" id="ftco-nav">
		   <ul class="navbar-nav ml-auto">
			 <li class="nav-item ${check_page(0)}"><a href="index.html" class="nav-link">Home</a></li>
			 <li class="nav-item ${check_page(1)}"><a href="about.html" class="nav-link">About</a></li>
			 <li class="nav-item ${check_page(2)}"><a href="members.html" class="nav-link">Members</a></li>
			 <li class="nav-item ${check_page(3)}"><a href="programs.html" class="nav-link">Programs</a></li>
			 <li class="nav-item ${check_page(4)}"><a href="calendar.html" class="nav-link">Calendar</a></li>
			 <li class="nav-item ${check_page(5)}"><a href="sponsors.html" class="nav-link">Sponsors</a></li>
			 <li class="nav-item ${check_page(6)}"><a href="resources.html" class="nav-link">Resources</a></li>
			 <li class="nav-item ${check_page(7)}"><a href="hackathon.html" class="nav-link">Hackathon</a></li>
			 <li class="nav-item ${check_page(8)}"><a href="contact.html" class="nav-link">Contact</a></li>
		   </ul>
		 </div>
	   </div>
`
document.querySelector('.ftco_navbar').innerHTML = output
